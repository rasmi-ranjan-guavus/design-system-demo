var that=this;function __skpm_run(key,context){that.context=context;var exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.js")}({"./node_modules/@skpm/events/index.js":
/*!********************************************!*\
  !*** ./node_modules/@skpm/events/index.js ***!
  \********************************************/
/*! no static exports found */function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){}i.defaultMaxListeners=10;var r=i.prototype;function o(e){return"function"==typeof e||!(!e||"object"!==n(e))&&o(e.listener)}r._maxListeners=i.defaultMaxListeners,r._getListeners=function(e){var t=this._getEvents();return t[e]||(t[e]=[])},r._getEvents=function(){return this._events||(this._events={})},r.addListener=function(e){return function(){return this[e].apply(this,arguments)}}("on"),r.emit=function(e){var t,n,i=Array.prototype.slice.call(arguments,1),r=this._getListeners(e)||[];for(n=0;n<r.length;n++)!0===(t=r[n]).once&&this.removeListener(e,t.listener),t.listener.apply(this,i||[]);return r.length>0},r.eventNames=function(){var e=this._getEvents();return Object.keys(e)},r.getMaxListeners=function(){return this._maxListeners},r.listenerCount=function(e){return this._getListeners(e).length},r.listeners=function(e){return this._getListeners(e).map(function(e){return e.listener})},r.on=function(e,t){if(!o(t))throw new Error("listener must be a function");var i=this._getListeners(e),r="object"===n(t);return this.emit("newListener",e,r?t.listener:t),i.push(r?t:{listener:t,once:!1}),this},r.once=function(e,t){return this.on(e,{listener:t,once:!0})},r.prependListener=function(e,t){if(!o(t))throw new Error("listener must be a function");var i=this._getListeners(e),r="object"===n(t);return this.emit("newListener",e,r?t.listener:t),i.unshift(r?t:{listener:t,once:!1}),this},r.prependOnceListener=function(e,t){return this.prependListener(e,{listener:t,once:!0})},r.removeAllListeners=function(e){var t=this._getEvents();return"string"==typeof e?delete t[e]:delete this._events,this},r.removeListener=function(e,t){var n=this._getListeners(e),i=function(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}(n,t);return-1!==i&&(n.splice(i,1),this.emit("removeListener",e,t)),this},r.setMaxListeners=function(e){return this._maxListeners=e,this},r.rawListeners=function(e){return this._getListeners(e).slice()},e.exports=i},"./node_modules/@skpm/timers/immediate.js":
/*!************************************************!*\
  !*** ./node_modules/@skpm/timers/immediate.js ***!
  \************************************************/
/*! no static exports found */function(e,t,n){var i=n(/*! ./timeout */"./node_modules/@skpm/timers/timeout.js");e.exports={setImmediate:function(e,t,n,r,o,a,s,u,c,l,d){return i.setTimeout(e,0,t,n,r,o,a,s,u,c,l,d)},clearImmediate:function(e){return i.clearTimeout(e)}}},"./node_modules/@skpm/timers/test-if-fiber.js":
/*!****************************************************!*\
  !*** ./node_modules/@skpm/timers/test-if-fiber.js ***!
  \****************************************************/
/*! no static exports found */function(e,t){e.exports=function(){return"undefined"!=typeof coscript&&coscript.createFiber}},"./node_modules/@skpm/timers/timeout.js":
/*!**********************************************!*\
  !*** ./node_modules/@skpm/timers/timeout.js ***!
  \**********************************************/
/*! no static exports found */function(e,t,n){var i,r,o=[];if(n(/*! ./test-if-fiber */"./node_modules/@skpm/timers/test-if-fiber.js")()){o=[];i=function(e,t,n,i,r,a,s,u,c,l,d,h){var f=o.length;return o.push(coscript.scheduleWithInterval_jsFunction((t||0)/1e3,function(){e(n,i,r,a,s,u,c,l,d,h)})),f},r=function(e){var t=o[e];t&&(t.cancel(),o[e]=void 0)}}else i=function(e,t,n,i,a,s,u,c,l,d,h,f){coscript.shouldKeepAround=!0;var m=o.length;return o.push(!0),coscript.scheduleWithInterval_jsFunction((t||0)/1e3,function(){o[m]&&e(n,i,a,s,u,c,l,d,h,f),r(m),o.every(function(e){return!e})&&(coscript.shouldKeepAround=!1)}),m},r=function(e){o[e]=!1};e.exports={setTimeout:i,clearTimeout:r}},"./node_modules/charenc/charenc.js":
/*!*****************************************!*\
  !*** ./node_modules/charenc/charenc.js ***!
  \*****************************************/
/*! no static exports found */function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},"./node_modules/cocoascript-class/lib/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/cocoascript-class/lib/index.js ***!
  \*****************************************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuperCall=void 0,t.default=function(e){var t=e.superclass||NSObject,n=(e.className||e.classname||"ObjCClass")+NSUUID.UUID().UUIDString(),o=new Set(["className","classname","superclass"]),a=MOClassDescription.allocateDescriptionForClassWithName_superclass_(n,t),s=[];for(var u in e){var c=e[u];if("function"==typeof c&&"init"!==u){var l=NSSelectorFromString(u);a.addInstanceMethodWithSelector_function_(l,c)}else o.has(u)||(s.push(u),a.addInstanceVariableWithName_typeEncoding(u,"@"))}return a.addInstanceMethodWithSelector_function_(NSSelectorFromString("init"),function(){var t=r.call(this);return s.map(function(n){Object.defineProperty(t,n,{get:function(){return function(e,t){var n=MOPointer.new();return(0,i.object_getInstanceVariable)(e,t,n),n.value().retain().autorelease()}(t,n)},set:function(e){(0,i.object_setInstanceVariable)(t,n,e)}}),t[n]=e[n]}),"function"==typeof e.init&&e.init.call(this),t}),a.registerClass()};var i=n(/*! ./runtime.js */"./node_modules/cocoascript-class/lib/runtime.js");t.SuperCall=i.SuperCall;var r=(0,i.SuperCall)(NSStringFromSelector("init"),[],{type:"@"})},"./node_modules/cocoascript-class/lib/runtime.js":
/*!*******************************************************!*\
  !*** ./node_modules/cocoascript-class/lib/runtime.js ***!
  \*******************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SuperCall=SuperCall,exports.CFunc=CFunc;var objc_super_typeEncoding='{objc_super="receiver"@"super_class"#}';function SuperCall(selector,argTypes,returnType){var func=CFunc("objc_msgSendSuper",[{type:"^"+objc_super_typeEncoding},{type:":"}].concat(_toConsumableArray(argTypes)),returnType);return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var struct=make_objc_super(this,this.superclass()),structPtr=MOPointer.alloc().initWithValue_(struct),params=["structPtr","selector"].concat([].slice.apply(arguments).map(function(e,t){return"arguments[".concat(t,"]")}));return eval("func(".concat(params.join(", "),")"))}}function makeStruct(e){if("object"!==_typeof(e)||0==Object.keys(e).length)return e;var t=Object.keys(e)[0],n=e[t],i=MOStruct.structureWithName_memberNames_runtime(t,Object.keys(n),Mocha.sharedRuntime());return Object.keys(n).map(function(e){i[e]=makeStruct(n[e])}),i}function make_objc_super(e,t){return makeStruct({objc_super:{receiver:e,super_class:t}})}function setKeys(e,t){var n=NSMutableDictionary.dictionary();n.o=e,Object.keys(t).map(function(e){return n.setValue_forKeyPath(t[e],"o."+e)})}function CFunc(e,t,n){function i(e){if(!e)return null;var t=MOBridgeSupportArgument.alloc().init();return setKeys(t,{type64:e.type}),t}var r=MOBridgeSupportFunction.alloc().init();return setKeys(r,{name:e,arguments:t.map(i),returnValue:i(n)}),r}function addStructToBridgeSupport(e,t){var n=MOBridgeSupportController.sharedController().valueForKey("symbols");if(!n)throw Error("Something has changed within bridge support so we can't add our definitions");if(null===n[e]){var i=MOBridgeSupportStruct.alloc().init();setKeys(i,{name:e,type:t.type}),n[e]=i}}var object_getInstanceVariable=exports.object_getInstanceVariable=CFunc("object_getInstanceVariable",[{type:"@"},{type:"*"},{type:"^@"}],{type:"^{objc_ivar=}"}),object_setInstanceVariable=exports.object_setInstanceVariable=CFunc("object_setInstanceVariable",[{type:"@"},{type:"*"},{type:"@"}],{type:"^{objc_ivar=}"});addStructToBridgeSupport("objc_super",{type:objc_super_typeEncoding})},"./node_modules/crypt/crypt.js":
/*!*************************************!*\
  !*** ./node_modules/crypt/crypt.js ***!
  \*************************************/
/*! no static exports found */function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,i=0;n<e.length;n++,i+=8)t[i>>>5]|=e[n]<<24-i%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],i=0;i<e.length;i+=3)for(var r=e[i]<<16|e[i+1]<<8|e[i+2],o=0;o<4;o++)8*i+6*o<=8*e.length?n.push(t.charAt(r>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],i=0,r=0;i<e.length;r=++i%4)0!=r&&n.push((t.indexOf(e.charAt(i-1))&Math.pow(2,-2*r+8)-1)<<2*r|t.indexOf(e.charAt(i))>>>6-2*r);return n}};e.exports=n}()},"./node_modules/is-buffer/index.js":
/*!*****************************************!*\
  !*** ./node_modules/is-buffer/index.js ***!
  \*****************************************/
/*! no static exports found */function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},"./node_modules/md5/md5.js":
/*!*********************************!*\
  !*** ./node_modules/md5/md5.js ***!
  \*********************************/
/*! no static exports found */function(e,t,n){!function(){var t=n(/*! crypt */"./node_modules/crypt/crypt.js"),i=n(/*! charenc */"./node_modules/charenc/charenc.js").utf8,r=n(/*! is-buffer */"./node_modules/is-buffer/index.js"),o=n(/*! charenc */"./node_modules/charenc/charenc.js").bin,a=function e(n,a){n.constructor==String?n=a&&"binary"===a.encoding?o.stringToBytes(n):i.stringToBytes(n):r(n)?n=Array.prototype.slice.call(n,0):Array.isArray(n)||(n=n.toString());for(var s=t.bytesToWords(n),u=8*n.length,c=1732584193,l=-271733879,d=-1732584194,h=271733878,f=0;f<s.length;f++)s[f]=16711935&(s[f]<<8|s[f]>>>24)|4278255360&(s[f]<<24|s[f]>>>8);s[u>>>5]|=128<<u%32,s[14+(u+64>>>9<<4)]=u;var m=e._ff,p=e._gg,y=e._hh,g=e._ii;for(f=0;f<s.length;f+=16){var b=c,v=l,S=d,w=h;l=g(l=g(l=g(l=g(l=y(l=y(l=y(l=y(l=p(l=p(l=p(l=p(l=m(l=m(l=m(l=m(l,d=m(d,h=m(h,c=m(c,l,d,h,s[f+0],7,-680876936),l,d,s[f+1],12,-389564586),c,l,s[f+2],17,606105819),h,c,s[f+3],22,-1044525330),d=m(d,h=m(h,c=m(c,l,d,h,s[f+4],7,-176418897),l,d,s[f+5],12,1200080426),c,l,s[f+6],17,-1473231341),h,c,s[f+7],22,-45705983),d=m(d,h=m(h,c=m(c,l,d,h,s[f+8],7,1770035416),l,d,s[f+9],12,-1958414417),c,l,s[f+10],17,-42063),h,c,s[f+11],22,-1990404162),d=m(d,h=m(h,c=m(c,l,d,h,s[f+12],7,1804603682),l,d,s[f+13],12,-40341101),c,l,s[f+14],17,-1502002290),h,c,s[f+15],22,1236535329),d=p(d,h=p(h,c=p(c,l,d,h,s[f+1],5,-165796510),l,d,s[f+6],9,-1069501632),c,l,s[f+11],14,643717713),h,c,s[f+0],20,-373897302),d=p(d,h=p(h,c=p(c,l,d,h,s[f+5],5,-701558691),l,d,s[f+10],9,38016083),c,l,s[f+15],14,-660478335),h,c,s[f+4],20,-405537848),d=p(d,h=p(h,c=p(c,l,d,h,s[f+9],5,568446438),l,d,s[f+14],9,-1019803690),c,l,s[f+3],14,-187363961),h,c,s[f+8],20,1163531501),d=p(d,h=p(h,c=p(c,l,d,h,s[f+13],5,-1444681467),l,d,s[f+2],9,-51403784),c,l,s[f+7],14,1735328473),h,c,s[f+12],20,-1926607734),d=y(d,h=y(h,c=y(c,l,d,h,s[f+5],4,-378558),l,d,s[f+8],11,-2022574463),c,l,s[f+11],16,1839030562),h,c,s[f+14],23,-35309556),d=y(d,h=y(h,c=y(c,l,d,h,s[f+1],4,-1530992060),l,d,s[f+4],11,1272893353),c,l,s[f+7],16,-155497632),h,c,s[f+10],23,-1094730640),d=y(d,h=y(h,c=y(c,l,d,h,s[f+13],4,681279174),l,d,s[f+0],11,-358537222),c,l,s[f+3],16,-722521979),h,c,s[f+6],23,76029189),d=y(d,h=y(h,c=y(c,l,d,h,s[f+9],4,-640364487),l,d,s[f+12],11,-421815835),c,l,s[f+15],16,530742520),h,c,s[f+2],23,-995338651),d=g(d,h=g(h,c=g(c,l,d,h,s[f+0],6,-198630844),l,d,s[f+7],10,1126891415),c,l,s[f+14],15,-1416354905),h,c,s[f+5],21,-57434055),d=g(d,h=g(h,c=g(c,l,d,h,s[f+12],6,1700485571),l,d,s[f+3],10,-1894986606),c,l,s[f+10],15,-1051523),h,c,s[f+1],21,-2054922799),d=g(d,h=g(h,c=g(c,l,d,h,s[f+8],6,1873313359),l,d,s[f+15],10,-30611744),c,l,s[f+6],15,-1560198380),h,c,s[f+13],21,1309151649),d=g(d,h=g(h,c=g(c,l,d,h,s[f+4],6,-145523070),l,d,s[f+11],10,-1120210379),c,l,s[f+2],15,718787259),h,c,s[f+9],21,-343485551),c=c+b>>>0,l=l+v>>>0,d=d+S>>>0,h=h+w>>>0}return t.endian([c,l,d,h])};a._ff=function(e,t,n,i,r,o,a){var s=e+(t&n|~t&i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._gg=function(e,t,n,i,r,o,a){var s=e+(t&i|n&~i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._hh=function(e,t,n,i,r,o,a){var s=e+(t^n^i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._ii=function(e,t,n,i,r,o,a){var s=e+(n^(t|~i))+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var i=t.wordsToBytes(a(e,n));return n&&n.asBytes?i:n&&n.asString?o.bytesToString(i):t.bytesToHex(i)}}()},"./node_modules/promise-polyfill/lib/index.js":
/*!****************************************************!*\
  !*** ./node_modules/promise-polyfill/lib/index.js ***!
  \****************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=t;function o(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void c(t.promise,e)}u(t.promise,i)}else(1===e._state?u:c)(t.promise,e._value)})):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===i(t)||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void d(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,l(e)}catch(t){c(e,t)}}function c(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(o);return s(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},a.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},a.all=function(e){return new a(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function a(e,s){try{if(s&&("object"===i(s)||"function"==typeof s)){var u=s.then;if("function"==typeof u)return void u.call(s,function(t){a(e,t)},n)}r[e]=s,0==--o&&t(r)}catch(e){n(e)}}for(var s=0;s<r.length;s++)a(s,r[s])})},a.resolve=function(e){return e&&"object"===i(e)&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,n){n(e)})},a.race=function(e){return new a(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},a._immediateFn="function"==typeof n&&function(e){n(e)}||function(e){r(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=a}).call(this,n(/*! ./node_modules/@skpm/timers/timeout.js */"./node_modules/@skpm/timers/timeout.js").setTimeout,n(/*! ./node_modules/@skpm/timers/immediate.js */"./node_modules/@skpm/timers/immediate.js").setImmediate)},"./node_modules/sketch-module-web-view/lib/browser-api.js":
/*!****************************************************************!*\
  !*** ./node_modules/sketch-module-web-view/lib/browser-api.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t){var n=["NSColor","NSCachedWhiteColor","NSColorSpaceColor","NSDynamicSystemColor","NSCachedColorSpaceColor"];e.exports=function(e,t,i){function r(n){e.isVisible()||(n?(NSApplication.sharedApplication().activateIgnoringOtherApps(!0),t.makeKeyAndOrderFront(null)):t.orderBack(null))}e._panel=t,e._webview=i,e._destroyed=!1,e.destroy=function(){return t.close()},e.close=function(){e.isClosable()&&t.performClose(null)},e.focus=r.bind(this,!0),e.blur=r.bind(this,!1),e.isFocused=function(){return t.isKeyWindow()},e.isDestroyed=function(){return e._destroyed},e.show=function(){return NSApp.activateIgnoringOtherApps(!0),t.makeKeyAndOrderFront(null)},e.showInactive=function(){return t.orderFrontRegardless()},e.hide=function(){return t.orderOut(null)},e.isVisible=function(){return t.isVisible()},e.isModal=function(){return!1},e.maximize=function(){e.isMaximized()||t.zoom(null)},e.unmaximize=function(){e.isMaximized()&&t.zoom(null)},e.isMaximized=function(){if(0!=(t.styleMask()&NSResizableWindowMask))return t.isZoomed();var e=NSScreen.mainScreen().visibleFrame(),n=t.frame();return e.origin.x==n.origin.x&&e.origin.y==n.origin.y&&e.size.width==n.size.width&&e.size.height==n.size.height},e.minimize=function(){return t.miniaturize(null)},e.restore=function(){return t.deminiaturize(null)},e.isMinimized=function(){return t.isMiniaturized()},e.setFullScreen=function(n){n!==e.isFullscreen()&&t.toggleFullScreen(null)},e.isFullscreen=function(){return t.styleMask()&NSFullScreenWindowMask},e.setAspectRatio=function(e){e>0?t.setAspectRatio(NSMakeSize(e,1)):t.setResizeIncrements(NSMakeSize(1,1))},e.setBounds=function(n,i){if(!e.isFullscreen()){var r=n.size,o=NSMakeRect(n.origin.x,0,r.width,r.height),a=NSScreen.screens().firstObject();o.origin.y=NSHeight(a.frame())-r.height-n.origin.y,t.setFrame_display_animate(o,!0,i)}},e.getBounds=function(){return t.frame()},e.setContentBounds=function(){},e.getContentBounds=function(){},e.setSize=function(t,n,i){var r=e.getBounds();return r.size.height=n,r.size.width=t,e.setBounds(r,i)},e.getSize=function(){var t=e.getBounds();return[t.size.width,t.size.height]},e.setContentSize=function(t,n,i){var r=e.getContentBounds();return r.size.height=n,r.size.width=t,e.setContentBounds(r,i)},e.getContentSize=function(){var t=e.getContentBounds();return[t.size.width,t.size.height]},e.setMinimumSize=function(e,n){var i={width:e,height:n};t.setContentMinSize(i)},e.getMinimumSize=function(){var e=t.contentMinSize();return[e.width,e.height]},e.setMaximumSize=function(e,n){var i={width:e,height:n};t.setContentMaxSize(i)},e.getMaximumSize=function(){var e=t.contentMaxSize();return[e.width,e.height]},e.setResizable=function(t){return e._setStyleMask(t,NSResizableWindowMask)},e.isResizable=function(){return t.styleMask()&NSResizableWindowMask},e.setMovable=function(e){return t.setMovable(e)},e.isMovable=function(){return t.isMovable()},e.setMinimizable=function(t){return e._setStyleMask(t,NSMiniaturizableWindowMask)},e.isMinimizable=function(){return t.styleMask()&NSMiniaturizableWindowMask},e.setMaximizable=function(e){t.standardWindowButton(NSWindowZoomButton)&&t.standardWindowButton(NSWindowZoomButton).setEnabled(e)},e.isMaximizable=function(){return t.standardWindowButton(NSWindowZoomButton)&&t.standardWindowButton(NSWindowZoomButton).isEnabled()},e.setFullScreenable=function(t){e._setCollectionBehavior(t,NSWindowCollectionBehaviorFullScreenPrimary),e._setCollectionBehavior(!t,NSWindowCollectionBehaviorFullScreenAuxiliary)},e.isFullScreenable=function(){return t.collectionBehavior()&NSWindowCollectionBehaviorFullScreenPrimary},e.setClosable=function(t){e._setStyleMask(t,NSClosableWindowMask)},e.isClosable=function(){return t.styleMask()&NSClosableWindowMask},e.setAlwaysOnTop=function(e,n,i){var r=NSNormalWindowLevel,o=CGWindowLevelForKey(kCGMaximumWindowLevelKey),a=CGWindowLevelForKey(kCGMinimumWindowLevelKey);e&&(r="normal"===n?NSNormalWindowLevel:"torn-off-menu"===n?NSTornOffMenuWindowLevel:"modal-panel"===n?NSModalPanelWindowLevel:"main-menu"===n?NSMainMenuWindowLevel:"status"===n?NSStatusWindowLevel:"pop-up-menu"===n?NSPopUpMenuWindowLevel:"screen-saver"===n?NSScreenSaverWindowLevel:"dock"===n?NSDockWindowLevel:NSFloatingWindowLevel);var s=r+(i||0);if(!(s>=a&&s<=o))throw new Error("relativeLevel must be between "+a+" and "+o);t.setLevel(s)},e.isAlwaysOnTop=function(){return t.level()!==NSNormalWindowLevel},e.moveTop=function(){return t.orderFrontRegardless()},e.center=function(){t.center()},e.setPosition=function(t,n,i){var r=e.getBounds(),o=NSScreen.screens().firstObject().frame();return r.origin.x=t,r.origin.y=Math.round(NSHeight(o)-n),e.setBounds(r,i)},e.getPosition=function(){var t=e.getBounds(),n=NSScreen.screens().firstObject().frame();return[t.origin.x,Math.round(NSHeight(n)-t.origin.y)]},e.setTitle=function(e){t.setTitle(e)},e.getTitle=function(){return String(t.title())};var o=0;e.flashFrame=function(e){e?o=NSApp.requestUserAttention(NSInformationalRequest):(NSApp.cancelUserAttentionRequest(o),o=0)},e.getNativeWindowHandle=function(){return t},e.getNativeWebViewHandle=function(){return i},e.loadURL=function(e){/^(?!http|localhost|www|file).*\.html?$/.test(e)&&"undefined"!=typeof __command&&__command.pluginBundle()&&(e=__command.pluginBundle().urlForResourceNamed(e).path()),i.setMainFrameURL(e)},e.reload=function(){i.reload()},e.setHasShadow=function(e){return t.setHasShadow(e)},e.hasShadow=function(){return t.hasShadow()},e.setOpacity=function(e){return t.setAlphaValue(e)},e.getOpacity=function(){return t.alphaValue()},e.setVisibleOnAllWorkspaces=function(t){return e._setCollectionBehavior(t,NSWindowCollectionBehaviorCanJoinAllSpaces)},e.isVisibleOnAllWorkspaces=function(){return t.collectionBehavior()&NSWindowCollectionBehaviorCanJoinAllSpaces},e.setIgnoreMouseEvents=function(e){return t.setIgnoresMouseEvents(e)},e.setContentProtection=function(e){t.setSharingType(e?NSWindowSharingNone:NSWindowSharingReadOnly)},e.setAutoHideCursor=function(e){t.setDisableAutoHideCursor(e)},e.setVibrancy=function(n){var i=e._vibrantView;if(!n){if(null==i)return;return i.removeFromSuperview(),void t.setVibrantView(null)}if(null==i){var r=t.contentView();i=NSVisualEffectView.alloc().initWithFrame(r.bounds()),e._vibrantView=i,i.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),i.setBlendingMode(NSVisualEffectBlendingModeBehindWindow),i.setState(NSVisualEffectStateActive),i.setFrame(r.bounds()),r.addSubview_positioned_relativeTo(i,NSWindowBelow,null)}var o=NSVisualEffectMaterialLight;"appearance-based"===n?o=NSVisualEffectMaterialAppearanceBased:"light"===n?o=NSVisualEffectMaterialLight:"dark"===n?o=NSVisualEffectMaterialDark:"titlebar"===n?o=NSVisualEffectMaterialTitlebar:"selection"===n?o=NSVisualEffectMaterialSelection:"menu"===n?o=NSVisualEffectMaterialMenu:"popover"===n?o=NSVisualEffectMaterialPopover:"sidebar"===n?o=NSVisualEffectMaterialSidebar:"medium-light"===n?o=NSVisualEffectMaterialMediumLight:"ultra-dark"===n&&(o=NSVisualEffectMaterialUltraDark),i.setMaterial(o)},e._setBackgroundColor=function(e){var r=function(e){if(!e||"#"!==e[0]){if(e&&e.class&&-1!==n.indexOf(String(e.class())))return e;throw new Error("Incorrect color formating. It should be an hex color: #RRGGBBAA")}var t,i=e.substr(1);if(3===i.length?i+="F":6===i.length&&(i+="FF"),4===i.length)for(var r=0;r<4;r+=1)t+=i[r],t+=i[r];else{if(8!==i.length)return NSColor.whiteColor();t=i}var o=parseInt(t.slice(0,2),16),a=parseInt(t.slice(2,4),16),s=parseInt(t.slice(4,6),16),u=parseInt(t.slice(6,8),16);return NSColor.colorWithSRGBRed_green_blue_alpha(o,a,s,u)}(e);i.setDrawsBackground(!1),t.backgroundColor=r},e._invalidate=function(){t.flushWindow(),t.contentView().setNeedsDisplay(!0)},e._setStyleMask=function(n,i){var r=e.isMaximizable();n?t.setStyleMask(t.styleMask()|i):t.setStyleMask(t.styleMask()&~i),e.setMaximizable(r)},e._setCollectionBehavior=function(n,i){var r=e.isMaximizable();n?t.setCollectionBehavior(t.collectionBehavior()|i):t.setCollectionBehavior(t.collectionBehavior()&~i),e.setMaximizable(r)},e._showWindowButton=function(e){var n=t.standardWindowButton(e);n.superview().addSubview_positioned_relative(n,NSWindowAbove,null)}}},"./node_modules/sketch-module-web-view/lib/constants.js":
/*!**************************************************************!*\
  !*** ./node_modules/sketch-module-web-view/lib/constants.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t){e.exports={JS_BRIDGE:"__skpm_sketchBridge"}},"./node_modules/sketch-module-web-view/lib/dispatch-first-click.js":
/*!*************************************************************************!*\
  !*** ./node_modules/sketch-module-web-view/lib/dispatch-first-click.js ***!
  \*************************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e,t){var n=e.convertPoint_fromView(t.locationInWindow(),null);return"var el = document.elementFromPoint("+n.x+", "+(e.frame().size.height-n.y)+'); if (el && ["text", "textarea", "date", "datetime-local", "email", "number", "month", "password", "search", "tel", "time", "url", "week" ].indexOf(el.type) >= 0 && el.focus) {el.focus();} else if (el) {el.dispatchEvent(new Event("click", {bubbles: true}))}'}},"./node_modules/sketch-module-web-view/lib/fitSubview.js":
/*!***************************************************************!*\
  !*** ./node_modules/sketch-module-web-view/lib/fitSubview.js ***!
  \***************************************************************/
/*! no static exports found */function(e,t){function n(e,t,n,i){n.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(t,e,NSLayoutRelationEqual,n,e,1,i))}e.exports=function(e,t,i){i=i||[],e.setTranslatesAutoresizingMaskIntoConstraints(!1),n(NSLayoutAttributeLeft,e,t,i[0]||0),n(NSLayoutAttributeTop,e,t,i[1]||0),n(NSLayoutAttributeRight,e,t,i[2]||0),n(NSLayoutAttributeBottom,e,t,i[3]||0)}},"./node_modules/sketch-module-web-view/lib/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/sketch-module-web-view/lib/index.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,n){var i=n(/*! @skpm/events */"./node_modules/@skpm/events/index.js"),r=n(/*! ./browser-api */"./node_modules/sketch-module-web-view/lib/browser-api.js"),o=n(/*! ./webview-api */"./node_modules/sketch-module-web-view/lib/webview-api.js"),a=n(/*! ./fitSubview */"./node_modules/sketch-module-web-view/lib/fitSubview.js"),s=n(/*! ./dispatch-first-click */"./node_modules/sketch-module-web-view/lib/dispatch-first-click.js"),u=n(/*! ./set-delegates */"./node_modules/sketch-module-web-view/lib/set-delegates.js");function c(e){var t=(e=e||{}).identifier||NSUUID.UUID().UUIDString(),n=NSThread.mainThread().threadDictionary(),l=c.fromId(t);if(l)return l;var d,h=new i;h.id=t;try{d=coscript.createFiber()}catch(e){coscript.shouldKeepAround=!0}var f=e.width||800,m=e.height||600,p=NSScreen.screens().firstObject().frame(),y=NSMakeRect(void 0!==e.x?e.x:Math.round((NSWidth(p)-f)/2),void 0!==e.y?e.y:Math.round((NSHeight(p)-m)/2),f,m);e.titleBarStyle&&"default"!==e.titleBarStyle&&(e.frame=!1);var g="textured"!==e.windowType,b=NSTitledWindowMask;!1!==e.minimizable&&(b|=NSMiniaturizableWindowMask),!1!==e.closable&&(b|=NSClosableWindowMask),!1!==e.resizable&&(b|=NSResizableWindowMask),g&&!e.transparent&&!1!==e.frame||(b|=NSTexturedBackgroundWindowMask);var v=NSPanel.alloc().initWithContentRect_styleMask_backing_defer(y,b,NSBackingStoreBuffered,!0),S=WebView.alloc().initWithFrame(NSMakeRect(0,0,e.width||800,e.height||600));if(S.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),r(h,v,S),o(h,v,S),u(h,v,S),"desktop"===e.windowType&&(v.setLevel(kCGDesktopWindowLevel-1),v.setCollectionBehavior(NSWindowCollectionBehaviorCanJoinAllSpaces|NSWindowCollectionBehaviorStationary|NSWindowCollectionBehaviorIgnoresCycle)),void 0===e.minWidth&&void 0===e.minHeight||h.setMinimumSize(e.minWidth||0,e.minHeight||0),void 0===e.maxWidth&&void 0===e.maxHeight||h.setMaximumSize(e.maxWidth||1e4,e.maxHeight||1e4),e.transparent||!1===e.frame){v.titlebarAppearsTransparent=!0,v.titleVisibility=NSWindowTitleHidden,v.setOpaque(0),v.isMovableByWindowBackground=!0;var w=NSToolbar.alloc().initWithIdentifier("titlebarStylingToolbar");w.setShowsBaselineSeparator(!1),v.setToolbar(w)}if("hiddenInset"===e.titleBarStyle){var _=NSToolbar.alloc().initWithIdentifier("titlebarStylingToolbar");_.setShowsBaselineSeparator(!1),v.setToolbar(_)}!1!==e.frame&&e.useContentSize||h.setSize(f,m),e.center&&h.center(),e.alwaysOnTop&&h.setAlwaysOnTop(!0),e.fullscreen&&h.setFullScreen(!0),h.setFullScreenable(!!e.fullscreenable);var k=e.title||("undefined"!=typeof __command&&__command.pluginBundle()?__command.pluginBundle().name():void 0);k&&h.setTitle(k);var N=e.backgroundColor;e.transparent&&(N=NSColor.clearColor()),!N&&!1===e.frame&&e.vibrancy&&(N=NSColor.clearColor()),h._setBackgroundColor(N||NSColor.windowBackgroundColor()),!1===e.hasShadow&&h.setHasShadow(!1),void 0!==e.opacity&&h.setOpacity(e.opacity),e.webPreferences;var j=v.contentView();return!1!==e.frame?(S.setFrame(j.bounds()),j.addSubview(S)):(j.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),a(j,j.superview()),S.setFrame(j.bounds()),j.addSubview(S),v.standardWindowButton(NSWindowFullScreenButton)&&v.standardWindowButton(NSWindowFullScreenButton).setHidden(!0),e.titleBarStyle&&"default"!==e.titleBarStyle||(v.standardWindowButton(NSWindowZoomButton).setHidden(!0),v.standardWindowButton(NSWindowMiniaturizeButton).setHidden(!0),v.standardWindowButton(NSWindowCloseButton).setHidden(!0),v.standardWindowButton(NSWindowZoomButton).setEnabled(!1))),e.vibrancy&&h.setVibrancy(e.vibrancy),h.setMaximizable(!1!==e.maximizable),e.acceptsFirstMouse&&h.on("focus",function(e){e.type()===NSEventTypeLeftMouseDown&&h.webContents.executeJavaScript(s(S,e))}),!1!==e.show&&h.show(),h.on("closed",function(){h._destroyed=!0,n.removeObjectForKey(t),d?d.cleanup():coscript.shouldKeepAround=!1}),n[t]=v,d&&d.onCleanup(function(){h._destroyed||h.destroy()}),h}c.fromId=function(e){var t=NSThread.mainThread().threadDictionary();if(t[e])return c.fromPanel(t[e],e)},c.fromPanel=function(e,t){var n=new i;if(n.id=t,!e||!e.contentView)throw new Error("needs to pass an NSPanel");var a=e.contentView().subviews()[0];if(!a)throw new Error("The NSPanel needs to have a webview");return r(n,e,a),o(n,e,a),n},e.exports=c},"./node_modules/sketch-module-web-view/lib/parseWebArguments.js":
/*!**********************************************************************!*\
  !*** ./node_modules/sketch-module-web-view/lib/parseWebArguments.js ***!
  \**********************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){var t=null;try{t=JSON.parse(e[0])}catch(e){}return t&&t.constructor&&t.constructor===Array&&0!=t.length?t:null}},"./node_modules/sketch-module-web-view/lib/set-delegates.js":
/*!******************************************************************!*\
  !*** ./node_modules/sketch-module-web-view/lib/set-delegates.js ***!
  \******************************************************************/
/*! no static exports found */function(e,t,n){var i,r,o=n(/*! cocoascript-class */"./node_modules/cocoascript-class/lib/index.js").default,a=n(/*! ./parseWebArguments */"./node_modules/sketch-module-web-view/lib/parseWebArguments.js"),s=n(/*! ./constants */"./node_modules/sketch-module-web-view/lib/constants.js");e.exports=function(e,t,n){i||(i=o({classname:"WindowDelegateClass",utils:null,"windowDidResize:":function(){this.utils.emit("resize")},"windowDidMiniaturize:":function(){this.utils.emit("minimize")},"windowDidDeminiaturize:":function(){this.utils.emit("restore")},"windowDidEnterFullScreen:":function(){this.utils.emit("enter-full-screen")},"windowDidExitFullScreen:":function(){this.utils.emit("leave-full-screen")},"windowDidMove:":function(){this.utils.emit("move"),this.utils.emit("moved")},"windowShouldClose:":function(){var e=!0;return this.utils.emit("close",{get defaultPrevented(){return!e},preventDefault:function(){e=!1}}),e},"windowWillClose:":function(){this.utils.emit("closed")},"windowDidBecomeKey:":function(){this.utils.emit("focus",t.currentEvent())},"windowDidResignKey:":function(){this.utils.emit("blur")}})),r||(r=o({classname:"FrameLoadDelegateClass",state:NSMutableDictionary.dictionaryWithDictionary({lastQueryId:null,wasReady:0}),utils:null,"webView:didChangeLocationWithinPageForFrame:":function(e){this.utils.emit("did-navigate-in-page",[{},String(e.stringByEvaluatingJavaScriptFromString("window.location.href"))])},"webView:didCreateJavaScriptContext:forFrame:":function(e){e.windowScriptObject().setValue_forKey_(this,s.JS_BRIDGE)},"invokeUndefinedMethodFromWebScript:withArguments:":function(e,t){if("callNative"!==String(e))return!1;var n=this.utils.parseWebArguments(t);return!!n&&(this.utils.emit.apply(this,n),!0)},"webView:didFailLoadWithError:forFrame:":function(e,t){this.utils.emit("did-fail-load",t)},"webView:didFinishLoadForFrame:":function(){0==this.state.wasReady&&(this.utils.emitBrowserEvent("ready-to-show"),this.state.setObject_forKey(1,"wasReady")),this.utils.emit("did-finish-load"),this.utils.emit("did-frame-finish-load"),this.utils.emit("dom-ready")},"webView:didReceiveServerRedirectForProvisionalLoadForFrame:":function(){this.utils.emit("did-get-redirect-request")},"webView:didReceiveTitle:forFrame:":function(e,t){var n=String(t),i=!0;this.utils.emitBrowserEvent("page-title-updated",{get defaultPrevented(){return!i},preventDefault:function(){i=!1}},n),i&&n&&this.utils.setTitle(n)},"webView:didStartProvisionalLoadForFrame:":function(){this.utils.emit("did-start-loading")},"webView:willPerformClientRedirectToURL:delay:fireDate:forFrame:":function(e,t){this.utils.emit("will-navigate",{},String(t.absoluteString))}}));var u=r.new();u.utils=NSDictionary.dictionaryWithDictionary({setTitle:e.setTitle.bind(e),emitBrowserEvent:e.emit.bind(e),emit:e.webContents.emit.bind(e.webContents),parseWebArguments:a}),u.state=NSMutableDictionary.dictionaryWithDictionary({lastQueryId:null,wasReady:0}),n.setFrameLoadDelegate(u);var c=i.new();c.utils=NSDictionary.dictionaryWithDictionary({emit:e.emit.bind(e)}),t.setDelegate(c)}},"./node_modules/sketch-module-web-view/lib/webview-api.js":
/*!****************************************************************!*\
  !*** ./node_modules/sketch-module-web-view/lib/webview-api.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t,n){var i=n(/*! @skpm/events */"./node_modules/@skpm/events/index.js");e.exports=function(e,t,n){var r=new i;r.loadURL=e.loadURL,r.getURL=n.mainFrameURL,r.getTitle=n.mainFrameTitle,r.isDestroyed=function(){},r.isLoading=function(){return n.loading()},r.stop=n.stopLoading,r.reload=n.reload,r.canGoBack=n.canGoBack,r.canGoForward=n.canGoForward,r.goBack=n.goBack,r.goForward=n.goForward,r.executeJavaScript=function(e){return n.stringByEvaluatingJavaScriptFromString(e)},r.undo=function(){n.undoManager().undo()},r.redo=function(){n.undoManager().redo()},r.cut=n.cut,r.copy=n.copy,r.paste=n.paste,r.pasteAndMatchStyle=n.pasteAsRichText,r.delete=n.delete,r.replace=n.replaceSelectionWithText,r.getNativeWebview=function(){return n},e.webContents=r}},"./node_modules/sketch-polyfill-fetch/lib/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/sketch-polyfill-fetch/lib/index.js ***!
  \*********************************************************/
/*! no static exports found */function(e,t,n){(function(t){var i,r,o=n(/*! cocoascript-class */"./node_modules/cocoascript-class/lib/index.js").default;try{i=n(/*! buffer */"buffer").Buffer}catch(e){}e.exports=function(e,n){var a;n=n||{};try{a=coscript.createFiber()}catch(e){coscript.shouldKeepAround=!0}return new t(function(s,u){var c,l=NSURL.alloc().initWithString(e),d=NSMutableURLRequest.requestWithURL(l);(d.setHTTPMethod(n.method||"GET"),Object.keys(n.headers||{}).forEach(function(e){d.setValue_forHTTPHeaderField(n.headers[e],e)}),n.body)&&("string"==typeof n.body?c=NSString.alloc().initWithString(n.body).dataUsingEncoding(NSUTF8StringEncoding):i&&i.isBuffer(n.body)?c=n.body.toNSData():n.body.isKindOfClass&&1==n.body.isKindOfClass(NSData)?c=n.body:(c=NSJSONSerialization.dataWithJSONObject_options_error(n.body,NSJSONWritingPrettyPrinted,void 0),d.setValue_forHTTPHeaderField(""+c.length(),"Content-Length")),d.setHTTPBody(c));if(n.cache)switch(n.cache){case"reload":case"no-cache":case"no-store":d.setCachePolicy(1);case"force-cache":d.setCachePolicy(2);case"only-if-cached":d.setCachePolicy(3)}n.credentials||d.setHTTPShouldHandleCookies(!1),r||(r=o({classname:"FetchPolyfillDelegate",data:null,httpResponse:null,fiber:null,callbacks:null,"connectionDidFinishLoading:":function(e){this.callbacks.succeed(this.httpResponse,this.data),this.fiber?this.fiber.cleanup():coscript.shouldKeepAround=!1},"connection:didReceiveResponse:":function(e,t){this.httpResponse=t,this.data=NSMutableData.alloc().init()},"connection:didFailWithError:":function(e,t){this.callbacks.fail(t),this.fiber?this.fiber.cleanup():coscript.shouldKeepAround=!1},"connection:didReceiveData:":function(e,t){this.data.appendData(t)}}));var h=!1,f=r.new();f.callbacks=NSDictionary.dictionaryWithDictionary({succeed:function(e,n){h=!0,s(function e(n,r){for(var o,a=[],s=[],u={},c=0;c<n.allHeaderFields().allKeys().length;c++){var l=n.allHeaderFields().allKeys()[c].toLowerCase(),d=String(n.allHeaderFields()[l]);a.push(l),s.push([l,d]),o=u[l],u[l]=o?o+","+d:d}return{ok:1==(n.statusCode()/200|0),status:Number(n.statusCode()),statusText:NSHTTPURLResponse.localizedStringForStatusCode(n.statusCode()),useFinalURL:!0,url:String(n.URL().absoluteString()),clone:e.bind(this,n,r),text:function(){return new t(function(e,t){var n=NSString.alloc().initWithData_encoding(r,NSASCIIStringEncoding);n?e(n):t(new Error("Couldn't parse body"))})},json:function(){return new t(function(e,t){var n=NSString.alloc().initWithData_encoding(r,NSUTF8StringEncoding);n?e(JSON.parse(n)):t(new Error("Could not parse JSON because it is not valid UTF-8 data."))})},blob:function(){return t.resolve(r)},arrayBuffer:function(){return t.resolve(i.from(r))},headers:{keys:function(){return a},entries:function(){return s},get:function(e){return u[e.toLowerCase()]},has:function(e){return e.toLowerCase()in u}}}}(e,n))},fail:function(e){h=!0,u(e)}}),f.fiber=a;var m=NSURLConnection.alloc().initWithRequest_delegate(d,f);a&&a.onCleanup(function(){h||m.cancel()})})}}).call(this,n(/*! ./node_modules/promise-polyfill/lib/index.js */"./node_modules/promise-polyfill/lib/index.js"))},"./resources/notification.html":
/*!*************************************!*\
  !*** ./resources/notification.html ***!
  \*************************************/
/*! no static exports found */function(e,t){e.exports="file://"+context.plugin.urlForResourceNamed("_webpack_resources/09036bb5854bc4ef771c34cc6aa461ae.html").path()},"./resources/panel.html":
/*!******************************!*\
  !*** ./resources/panel.html ***!
  \******************************/
/*! no static exports found */function(e,t){e.exports="file://"+context.plugin.urlForResourceNamed("_webpack_resources/10e7362342b797388654ddb2f399c152.html").path()},"./resources/window.html":
/*!*******************************!*\
  !*** ./resources/window.html ***!
  \*******************************/
/*! no static exports found */function(e,t){e.exports="file://"+context.plugin.urlForResourceNamed("_webpack_resources/e236748557f983b4ce6a06b642999eeb.html").path()},"./src/auth.js":
/*!*********************!*\
  !*** ./src/auth.js ***!
  \*********************/
/*! exports provided: Auth */function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t),n.d(t,"Auth",function(){return u});var r=n(/*! ./utils */"./src/utils.js"),o=n(/*! ./network */"./src/network.js").Network,a=n(/*! ./window */"./src/window.js").Window,s=n(/*! ./metrics */"./src/metrics.js").Metrics,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,null,[{key:"isLoggedIn",value:function(){return Boolean(r.getUserDefault("token"))}},{key:"showLogin",value:function(e){var t=this;this.window=new a({handlers:{readyForContent:function(){t.window.setState({login:!0})},login:this.sendLogin.bind(this,e)}}),this.window.open()}},{key:"logout",value:function(){r.setUserDefault("token",null)}},{key:"sendLogin",value:function(e,t){var n=this;this.window.setState({message:null});var i=t[0];o.post("login",i).then(function(t){t.json().then(function(t){r.setUserDefault("token",t.user_info.token),s.track("sketch:login"),n.window.close(),e()})}).catch(function(e){var t="Failed to contact zeroheight server";400===e.status&&(t="Sorry - we don't recognize those details"),n.window.setState({message:t})})}}]),e}()},"./src/error-zh.js":
/*!*************************!*\
  !*** ./src/error-zh.js ***!
  \*************************/
/*! exports provided: ErrorZh */function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t),n.d(t,"ErrorZh",function(){return a});var r=n(/*! ./utils */"./src/utils.js"),o=n(/*! ./network */"./src/network.js").Network,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,null,[{key:"onError",value:function(e){var t=e.toString()+" "+e.stack;if("[object Object]"===e.toString()&&(t=JSON.stringify(e)),e.callStackSymbols)try{t="V"+AppController.sharedInstance().licenseManager().currentVersion()+" "+t}catch(e){}o.postAndIgnore("error",{source:"Sketch",errorMessage:t,user_token:r.getUserDefault("token")})}}]),e}()},"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: onOpenDocument, onStartup, onShutdown, uploadSelected, uploadAll, welcome, logout, support, help */function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"onOpenDocument",function(){return c}),n.d(t,"onStartup",function(){return l}),n.d(t,"onShutdown",function(){return d}),n.d(t,"uploadSelected",function(){return h}),n.d(t,"uploadAll",function(){return f}),n.d(t,"welcome",function(){return m}),n.d(t,"logout",function(){return p}),n.d(t,"support",function(){return y}),n.d(t,"help",function(){return g});var i=n(/*! ./panel */"./src/panel.js").Panel,r=n(/*! ./user-events */"./src/user-events.js").UserEvents,o=n(/*! sketch/ui */"sketch/ui"),a=n(/*! ./utils */"./src/utils.js"),s=n(/*! ./network */"./src/network.js").Network,u=n(/*! ./error-zh */"./src/error-zh.js").ErrorZh;function c(e){i.addToDocument(e.actionContext.document)}function l(t){try{log("starting zeroheight "+t.plugin.version()),NSApplication.sharedApplication().orderedDocuments().forEach(function(e){i.addToDocument(e)}),NSThread.mainThread().threadDictionary()["zeroheight-position-check"]=1,e(i.checkPosition.bind(i),1e3),a.getUserDefault("doneWelcome")||(r.welcome(),a.setUserDefault("doneWelcome",!0))}catch(e){u.onError(e)}}function d(e){try{log("quitting zeroheight "+e.plugin.version()),NSApplication.sharedApplication().orderedDocuments().forEach(function(e){i.removeFromDocument(e)}),NSThread.mainThread().threadDictionary()["zeroheight-position-check"]=0}catch(e){u.onError(e)}coscript.shouldKeepAround=!1,coscript.cleanupFibers()}function h(e){try{var t=i.findPanelInDocument(e.document);if(!t)return u.onError(new Error("panel not found")),void o.alert("zeroheight - error","Something went wrong - your error has been sent to us");r.upload({onlySelected:!0,document:e.document,setPanelState:i.setPanelState.bind(i,t)})}catch(e){u.onError(e)}}function f(e){try{var t=i.findPanelInDocument(e.document);if(!t)return u.onError(new Error("panel not found")),void o.alert("zeroheight - error","Something went wrong - your error has been sent to us");r.upload({onlySelected:!1,document:e.document,setPanelState:i.setPanelState.bind(i,t)})}catch(e){u.onError(e)}}function m(e){try{r.welcome()}catch(e){u.onError(e)}}function p(e){try{r.logout()}catch(e){u.onError(e)}}function y(e){var t=s.server()+"/support";a.openUrlInBrowser(t)}function g(e){a.openUrlInBrowser("https://help.zeroheight.com")}coscript.shouldKeepAround=!0}.call(this,n(/*! ./node_modules/@skpm/timers/timeout.js */"./node_modules/@skpm/timers/timeout.js").setTimeout)},"./src/metrics.js":
/*!************************!*\
  !*** ./src/metrics.js ***!
  \************************/
/*! exports provided: Metrics */function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t),n.d(t,"Metrics",function(){return a});var r=n(/*! ./network */"./src/network.js").Network,o=n(/*! ./utils */"./src/utils.js"),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,null,[{key:"track",value:function(e){r.postAndIgnore("sketch_metric",{token:o.getUserDefault("token"),event:e})}}]),e}()},"./src/network.js":
/*!************************!*\
  !*** ./src/network.js ***!
  \************************/
/*! exports provided: Network */function(e,t,n){"use strict";n.r(t),function(e){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"Network",function(){return a});var r=n(/*! ./utils */"./src/utils.js"),o=n(/*! sketch-polyfill-fetch */"./node_modules/sketch-polyfill-fetch/lib/index.js"),a=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,null,[{key:"server",value:function(){return r.getUserDefault("webURL")||"https://zeroheight.com"}},{key:"get",value:function(e){return this.request("GET",e)}},{key:"post",value:function(e,t){return this.request("POST",e,t)}},{key:"postAndIgnore",value:function(e,t){return this.requestAndIgnore("POST",e,t)}},{key:"request",value:function(t,n,i){var a=this,s={headers:{Authorization:'Token token="'.concat(r.getUserDefault("token"),'"'),"Content-Type":"application/json",Accept:"application/json"},method:t};return i&&"GET"!==t&&(s.body=i),new e(function(e,t){o("".concat(a.server(),"/api/").concat(n),s).then(function(n){200===n.status?e(n):t(n)}).catch(t)})}},{key:"requestAndIgnore",value:function(e,t,n){var i={headers:{Authorization:'Token token="'.concat(r.getUserDefault("token"),'"'),"Content-Type":"application/json",Accept:"application/json"},method:e};n&&"GET"!==e&&(i.body=n),o("".concat(this.server(),"/api/").concat(t),i)}}]),t}()}.call(this,n(/*! ./node_modules/promise-polyfill/lib/index.js */"./node_modules/promise-polyfill/lib/index.js"))},"./src/notification.js":
/*!*****************************!*\
  !*** ./src/notification.js ***!
  \*****************************/
/*! exports provided: Notification */function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"Notification",function(){return a});var i=n(/*! sketch-module-web-view */"./node_modules/sketch-module-web-view/lib/index.js"),r=n.n(i);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(t,null,[{key:"showCompleted",value:function(e){var t="Upload complete for ".concat(e.docName),n=!0;if(void 0!==e.changes){var i=[];if(e.changes.updated>0&&i.push("Updated ".concat(e.changes.updated," item").concat(1===e.changes.updated?"":"s")),e.changes.added>0){var r=i.length>0?"a":"A";i.push("".concat(r,"dded ").concat(e.changes.added," item").concat(1===e.changes.added?"":"s"))}if(e.changes.deleted>0){var o=i.length>0?"d":"D";i.push("".concat(o,"eleted ").concat(e.changes.deleted," item").concat(1===e.changes.deleted?"":"s"))}t=i.length>0?"".concat(i.join(", ")," for ").concat(e.docName):"Nothing to upload, everything's up-to-date 🎉",n=i.length>0}this.showNotification({desc:t,cta:e.cta||"View in zeroheight",web:n},e.callback)}},{key:"showFailed",value:function(e,t){this.showNotification({desc:"Something went wrong uploading ".concat(e),showContact:!0},t)}},{key:"showNoSub",value:function(e){this.showNotification({desc:"Your subscription has expired"})}},{key:"showNotification",value:function(i,o){var a=0,s="zh.notif",u=r.a.fromId(s);u&&(s="zh.notif.1",a+=122,(u=r.a.fromId(s))&&(s="zh.notif.2",a+=122,(u=r.a.fromId(s))&&(s="zh.notif.3",a+=122)));var c={identifier:s,width:347,height:102,alwaysOnTop:!0,frame:!1,show:!1,transparent:!0,resizable:!1,hasShadow:!1},l=new r.a(c),d=l._panel;d.setHidesOnDeactivate(!1);var h=d.screen().visibleFrame(),f=d.screen().frame();f.size.width=347,f.size.height=102,f.origin.x=h.size.width-347-20,f.origin.y=h.size.height-102-20-a,d.setFrame_display(f,0),l.webContents.on("readyForContent",function(){t.setState(l,i)}),l.webContents.on("open",function(){l.close(),o()}),l.webContents.on("contact",function(){l.close(),o()}),l.loadURL(n(/*! ../resources/notification.html */"./resources/notification.html")),l.show(),e(function(){l.close()},7e3)}},{key:"setState",value:function(e,t){var n=JSON.stringify(t).replace(/'/g,"\\'");e.webContents.executeJavaScript("updateState(JSON.parse('".concat(n,"'));"))}}]),t}()}.call(this,n(/*! ./node_modules/@skpm/timers/timeout.js */"./node_modules/@skpm/timers/timeout.js").setTimeout)},"./src/panel.js":
/*!**********************!*\
  !*** ./src/panel.js ***!
  \**********************/
/*! exports provided: Panel */function(e,t,n){"use strict";n.r(t),function(e){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"Panel",function(){return u});var r=n(/*! cocoascript-class */"./node_modules/cocoascript-class/lib/index.js").default,o=n(/*! ./error-zh */"./src/error-zh.js").ErrorZh,a=n(/*! ./user-events */"./src/user-events.js").UserEvents,s=r({classname:"ZeroheightFrameLoadDelegate",utils:null,"webView:didCreateJavaScriptContext:forFrame:":function(e){e.windowScriptObject().setValue_forKey_(this,"pluginCall")},"invokeUndefinedMethodFromWebScript:withArguments:":function(e,t){this.utils.callback(t)}}),u=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,null,[{key:"addToDocument",value:function(e){this.waitForDocumentWindow(e)}},{key:"findPanelInDocument",value:function(e){var t=this.getLeftPaneFromDocumentWindow(e.documentWindow());if(!t)return null;var n=null;return t.subviews().forEach(function(e){"zeroheight"===String(e.identifier())&&(n=e)}),n}},{key:"removeFromDocument",value:function(e){var t=this.getLeftPaneFromDocumentWindow(e.documentWindow());if(t)if(t.subviews().forEach(function(e){"zeroheight"===String(e.identifier())&&e.removeFromSuperview()}),MSApplicationMetadata.metadata().appVersion<52){var n=t.constraints()[2].constant();t.constraints()[2].constant=n-31}else this.movePages(t,!0)}},{key:"getLeftPaneFromDocumentWindow",value:function(e){if(!e||!e.contentView)return null;var t=e.contentView().subviews()[0];if(!t)return null;var n=t.subviews();return n.length<2?null:"view_canvas"!==String(n[1].identifier())?null:n[0]}},{key:"waitForDocumentWindow",value:function(t){var n=function(){return e(this.waitForDocumentWindow.bind(this,t),500)}.bind(this);try{var i=this.getLeftPaneFromDocumentWindow(t.documentWindow());if(!i)return n();this.addPanel(i,t)}catch(e){o.onError(e)}}},{key:"setPanelState",value:function(e,t){var n=JSON.stringify(t).replace(/'/g,"\\'");e.stringByEvaluatingJavaScriptFromString("updateState(JSON.parse('".concat(n,"'));"))}},{key:"panelCallback",value:function(e,n,i){try{var r=String(i[0]);"upload"!==r&&"upload:selected"!==r||a.upload({onlySelected:"upload:selected"===r,document:e,setPanelState:t.setPanelState.bind(t,n)}),"cancel"===r&&a.cancel({document:e,setPanelState:t.setPanelState.bind(t,n)})}catch(e){o.onError(e)}}},{key:"checkPosition",value:function(){0!=NSThread.mainThread().threadDictionary()["zeroheight-position-check"]&&(NSApplication.sharedApplication().orderedDocuments().forEach(function(e){MSApplicationMetadata.metadata().appVersion<52?t.checkDocumentPositionPre52(e):t.checkDocumentPosition(e)}),e(t.checkPosition.bind(t),2e3))}},{key:"createPanel",value:function(e,t){var i=e.frame().size.width,r=WebView.alloc().init(),o=n(/*! ../resources/panel.html */"./resources/panel.html");r.setMainFrameURL(o),r.setFrameSize(NSMakeSize(i,31)),r.setBoundsSize(NSMakeSize(i,31)),r.setValue_forKey_(!1,"translatesAutoresizingMaskIntoConstraints"),r.identifier="zeroheight";var a=s.new();return a.utils=NSDictionary.dictionaryWithDictionary({callback:this.panelCallback.bind(null,t,r)}),r.setFrameLoadDelegate(a),r}},{key:"addPanel",value:function(e,n){var i=this.createPanel(e,n);e.addSubview(i),MSApplicationMetadata.metadata().appVersion<52?t.layoutPanelPre52(i,e):t.layoutPanel(i,e)}},{key:"checkDocumentPosition",value:function(e){var n=t.findPanelInDocument(e);if(n){var i=n.superview();this.movePages(i,!1);var r="Dark"===String(NSUserDefaults.standardUserDefaults().stringForKey("AppleInterfaceStyle"))?"true":"false";n.stringByEvaluatingJavaScriptFromString("updateDarkMode(".concat(r,");"))}}},{key:"movePages",value:function(e,t){var n=null;e.subviews().forEach(function(e){"MSFActionBarView"===String(e.class())&&(n=e)});var i=n?e.subviews()[1]:e.subviews()[0];e.constraints().forEach(function(e){e.firstAttribute()===NSLayoutAttributeTop&&(e.firstItem()!==i?n&&e.firstItem()===n&&(e.constant=t?0:31):e.constant=t?n?31:0:n?62:31)})}},{key:"layoutPanel",value:function(e,t){e.topAnchor().constraintEqualToAnchor_constant(t.topAnchor(),0).active=!0,e.leftAnchor().constraintEqualToAnchor_constant(t.leftAnchor(),0).active=!0,e.trailingAnchor().constraintEqualToAnchor_constant(t.trailingAnchor(),0).active=!0,this.movePages(t,!1);var n=NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant_(e,NSLayoutAttributeHeight,NSLayoutRelationEqual,null,null,1,31);e.addConstraint(n)}},{key:"layoutPanelPre52",value:function(e,t){var n={zh:e},i=0;t.subviews().length>2&&(i=31);var r=NSLayoutConstraint.constraintsWithVisualFormat_options_metrics_views("V:|-"+i+"-[zh]",null,null,n),o=NSLayoutConstraint.constraintsWithVisualFormat_options_metrics_views("H:|-(0)-[zh]",null,null,n),a=e.trailingAnchor().constraintEqualToAnchor(t.trailingAnchor());t.addConstraint(r[0]),t.addConstraint(o[0]),t.addConstraint(a),t.constraints()[2].constant=i+31;var s=NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant_(e,NSLayoutAttributeHeight,NSLayoutRelationEqual,null,null,1,31);e.addConstraint(s)}},{key:"checkDocumentPositionPre52",value:function(e){var n=t.findPanelInDocument(e);if(n&&!(n.superview().subviews().length<3)){var i=n.superview();62!==i.constraints()[2].constant()&&(i.constraints()[2].constant=62,i.constraints().forEach(function(e){"zeroheight"==e.firstItem().identifier()&&e.firstAttribute()==NSLayoutAttributeTop&&(e.constant=31)}))}}}]),t}()}.call(this,n(/*! ./node_modules/@skpm/timers/timeout.js */"./node_modules/@skpm/timers/timeout.js").setTimeout)},"./src/sketch-utils.js":
/*!*****************************!*\
  !*** ./src/sketch-utils.js ***!
  \*****************************/
/*! exports provided: getLayerStyles, getSelectedLayers, getDocumentColors, getTextStyles, getArtboardHashDetails, getArtboardImage, getArtboardDetails, getNestedSymbols */function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getLayerStyles",function(){return a}),n.d(t,"getSelectedLayers",function(){return u}),n.d(t,"getDocumentColors",function(){return l}),n.d(t,"getTextStyles",function(){return h}),n.d(t,"getArtboardHashDetails",function(){return f}),n.d(t,"getArtboardImage",function(){return m}),n.d(t,"getArtboardDetails",function(){return y}),n.d(t,"getNestedSymbols",function(){return v});var i=n(/*! md5 */"./node_modules/md5/md5.js"),r=n(/*! sketch/ui */"sketch/ui"),o=n(/*! ./utils */"./src/utils.js");function a(e){var t=e.layerStyles().sharedStyles(),n=[],r=MSStyledLayer.alloc().init();return t.forEach(function(e){r.style=e.style();var t=g(r),o=e.style().sharedObjectID?e.style().sharedObjectID():e.objectID();n.push({name:String(e.name()),uid:String(o),style:String(t),hash:String(i(String(t))),kind:"layer_style"})}),n}function s(e){for(var t=e.exportOptions().exportFormats(),n=null,i=null,r=[],o=null,a="",s=0;s<t.length;s++){n=t[s].scale(),i=String(t[s].fileFormat()),o=t[s].namingScheme(),a=e.name(),null!==t[s].name()&&(1===o?a=t[s].name()+e.name():0===o&&(a=e.name()+t[s].name()));var u={scale:String(n),extension:i,object_id:String(e.objectID()),image:"data:image/"+i+";base64,"+p(e,i,n),name:String(a)};r.push(u)}return r}function u(e){var t=[];return e.selectedLayers.layers.forEach(function(e){if("Artboard"!==e.type&&"SymbolMaster"!==e.type){if("SymbolInstance"===e.type){var n=e.master;if(n.getLibrary){if(!n.getLibrary())return void t.push(e.master.sketchObject)}else if(!AppController.sharedInstance().librariesController().libraryForShareableObject(n.sketchObject))return void t.push(e.master.sketchObject)}e.sketchObject.parentArtboard()&&t.push(e.sketchObject.parentArtboard())}else t.push(e.sketchObject)}),0===t.length?(r.alert("zeroheight - no artboards or symbols selected 🙈","Select some Artboards or Symbols and try again"),!1):o.toArray(t)}function c(e){for(var t=[],n=e.CSSAttributes(),i=0;i<n.count();++i)-1===n[i].indexOf("font-family")&&-1===n[i].indexOf("/*")&&t.push(String(n[i]));0!==e.font().italicAngle()&&t.push("font-style: italic;"),t.push("font-family: "+e.font().familyName()+"; ");var r=[100,100,100,200,300,400,500,500,600,700,800,900,900,900,900,900][NSFontManager.sharedFontManager().weightOfFont_(e.font())];switch(t.push("font-weight: "+r+"; "),"1"===String(e.style().textStyle().attributes().MSAttributedStringTextTransformAttribute)&&t.push("text-transform: uppercase;"),"1"===String(e.style().textStyle().attributes().NSUnderline)&&t.push("text-decoration: underline;"),e.textAlignment()){case 0:t.push(String("text-align: left;"));break;case 1:t.push(String("text-align: right;"));break;case 2:t.push(String("text-align: center;"));break;case 3:t.push(String("text-align: justify;"))}var o=e.styleAttributes().NSParagraphStyle;return o&&t.push(String("paragraph-spacing: "+o.paragraphSpacing()+";")),t}function l(e){var t=[];return e.assets().colors().forEach(function(e){var n=Math.round(255*e.red()),i=Math.round(255*e.green()),r=Math.round(255*e.blue()),o=e.alpha(),a="#"+("0"+Number(n).toString(16)).slice(-2).toUpperCase()+("0"+Number(i).toString(16)).slice(-2).toUpperCase()+("0"+Number(r).toString(16)).slice(-2).toUpperCase(),s=a;o<1&&(s="rgba("+n+","+i+","+r+","+o+")"),t.push({name:String(a),uid:String(s),style:String("background:"+s),hash:String(s),kind:"document_color"})}),t}function d(e,t){var n=e;e.isMemberOfClass_(MSImmutableModelObject)||(n=e.immutableModelObject());var i=String(MSJSONDataArchiver.archiveStringWithRootObject_error_(n,null));return i=function(e,t){for(var n=t.foreignSymbols(),i={},r=0;r<n.length;++r){var o=String(n[r].symbolMaster().symbolID()),a=String(n[r].originalMaster().symbolID());i[o]=a}return'{"foreignLookup":'+JSON.stringify(i)+","+e.substring(1)}(i=function(e,t,n){var i=e.children(),r=NSPredicate.predicateWithFormat_("(className == %@) || (className == %@)","MSSymbolInstance","MSImmutableSymbolInstance"),o=i.filteredArrayUsingPredicate_(r);if(0===o.length)return t;for(var a=n,s={},u=0;u<o.length;++u){var c=o[u],l=c.isMemberOfClass_(MSImmutableSymbolInstance),h=l?a.symbolWithID_(c.symbolID()):c.symbolMaster(),f=l?c:c.immutableModelObject();if(h&&h.immutableModelObject){var m=h.immutableModelObject().modifiedMasterByApplyingInstance_inDocument_(f,nil);s[c.objectID()]=d(m,n)}}return t='{"instanceLookup":'+JSON.stringify(s)+","+t.substring(1)}(e,i=(i=function(e,t){var n=e.children(),i=NSPredicate.predicateWithFormat("(className == %@) || (className == %@)","MSTextLayer","MSImmutableTextLayer"),r=n.filteredArrayUsingPredicate_(i);if(0===r.length)return t;for(var o={},a=0;a<r.length;++a){var s=String(r[a].objectID()),u=r[a].isKindOfClass_(MSImmutableTextLayer)?r[a].newMutableCounterpart():r[a];o[s]=c(u)}return'{"textLookup":'+JSON.stringify(o)+","+t.substring(1)}(e,i)).replace(new RegExp('("_data":")([^"]*)(")',"g"),"$1$3").replace(new RegExp('("_archive":")([^"]*)(")',"g"),"$1$3"),t),t)}function h(t){return new e(function(e,n){var r=[],a=MSTextLayer.alloc().init();a.stringValue="Type something";var s=t.layerTextStyles().sharedStyles();o.iterateItemsWithPeriodicYield({items:s,yieldEvery:500,yieldFor:100,onError:n,eachItem:function(e){a.style=e.style();var t=c(a).join(""),n=e.style().sharedObjectID?e.style().sharedObjectID():e.objectID();r.push({name:String(e.name()),uid:String(n),style:String(t),hash:String(i(String(t))),kind:"text_style"})},onYield:function(){},onDone:function(){e(r)},isCancelled:function(){return!1}})})}function f(e,t){var n="MSArtboardGroup"===String(e.class());return{uid:n?String(e.objectID()):String(e.symbolID()),kind:n?"artboard":"symbol",exportInfo:function(e){for(var t=[],n=e.children(),i=0;i<n.length;i++)0!==n[i].exportOptions().exportFormats().length&&(t=t.concat(s(n[i])));return t}(e),name:String(e.name()),hash:function(e,t){var n=null;if(e.changeIdentifier)n=e.changeIdentifier();else{var r=e.immutableModelObject();n=String(MSJSONDataArchiver.archiveStringWithRootObject_error_(r,null))}var o=b(e,t).map(function(e){var n=t.symbolWithID(e);return n?n.symbolID()+" "+n.changeIdentifier():""}).join(","),a=NSPredicate.predicateWithFormat("isLayerExportable == %@",!0),s=e.children().filteredArrayUsingPredicate(a),u=s.length>0?s.length.toString():"";return n=i(n+o+u),String(n)}(e,t)}}function m(e){var t=MSImmutableLayerAncestry.ancestryWithMSLayer_(e),n=MSExportRequest.exportRequestsFromLayerAncestry_(t).firstObject();n.format="png";var i=MSExportManager.alloc().init().rendererForRequest(n).bitmapImageRep().representationUsingType_properties_(NSPNGFileType,nil);return String(i.base64EncodedStringWithOptions_(0))}function p(e,t,n){var i=MSImmutableLayerAncestry.ancestryWithMSLayer_(e),r=MSExportRequest.exportRequestsFromLayerAncestry_(i).firstObject();r.format=t,r.scale=n;var o=NSColorSpace.sRGBColorSpace(),a=MSExporter.exporterForRequest_colorSpace_(r,o);return String(a.data().base64EncodedStringWithOptions(0))}function y(e,t){var n=f(e,t),i=function(e,t,n){var i=t.layers().length;if(0===i){if(!t.hasBackgroundColor())return!1;e.kind="color_symbol";var r=t.backgroundColor().RGBADictionary(),o=parseInt(256*r.r),a=parseInt(256*r.g),s=parseInt(256*r.b),u=r.a,c="rgba("+o+","+a+","+s+","+u+")";return e.style="background: "+c+";",e}if(i>1||"MSShapeGroup"!==String(t.layers()[0].class())&&"MSRectangleShape"!==String(t.layers()[0].class()))return!1;if("MSShapeGroup"===String(t.layers()[0].class())&&(t.layers()[0].layers().length>1||"MSRectangleShape"!==String(t.layers()[0].layers()[0].class())))return!1;var l=t.layers()[0],d=t.frame().size().height-l.frame().size().height,h=t.frame().size().width-l.frame().size().width;if(d>2||h>2)return!1;return e.kind="color_symbol",e.style=g(l),e}(n,e);if(i)return i;var r=function(e,t,n){if(t.layers().length>1||0===t.layers().length||"MSTextLayer"!==String(t.layers()[0].class()))return!1;var i=t.layers()[0],r=t.frame().size().height-i.frame().size().height,o=t.frame().size().width-i.frame().size().width;if(r>2||o>2)return!1;return e.kind="text_symbol",e.style=String(c(i).join("")),e}(n,e);return r||(n.image="data:image/png;base64,"+m(e),n.nested=v(e,t),n.json=d(e,t),n)}function g(e){var t=e.CSSAttributes();return t.length>0&&-1!==t[0].indexOf("/*")&&(t=t.slice(1)),t=t.join(""),String(t)}function b(e,t){var n=("undefined"!=typeof MSPasteboardLayersBase?MSPasteboardLayersBase:MSPasteboardLayersReaderWriter.alloc().init()).usedSymbolsInContainer_document_(MSLayerArray.arrayWithLayer_(e),t);return o.toArray(n.allObjects())}function v(e,t){var n=[];return b(e,t).forEach(function(e){var i=t.symbolWithID(e);if(i){var r={name:String(i.name()),uid:String(i.symbolID())};if(i.foreignObject()){var o=i.foreignObject().originalMaster();r.uid=String(o.symbolID());var a=AppController.sharedInstance().librariesController().libraryForShareableObject(o);a&&(r.libraryName=String(a.name()))}n.push(r)}}),o.toArray(n)}}.call(this,n(/*! ./node_modules/promise-polyfill/lib/index.js */"./node_modules/promise-polyfill/lib/index.js"))},"./src/upload.js":
/*!***********************!*\
  !*** ./src/upload.js ***!
  \***********************/
/*! exports provided: Upload */function(e,t,n){"use strict";n.r(t),function(e){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"Upload",function(){return m});var r=n(/*! ./sketch-utils */"./src/sketch-utils.js"),o=n(/*! sketch/settings */"sketch/settings"),a=n(/*! ./utils */"./src/utils.js"),s=n(/*! sketch/dom */"sketch/dom").Document,u=n(/*! ./network */"./src/network.js").Network,c=n(/*! ./error-zh */"./src/error-zh.js").ErrorZh,l=n(/*! ./auth */"./src/auth.js").Auth,d=n(/*! ./notification */"./src/notification.js").Notification,h=n(/*! ./window */"./src/window.js").Window,f=n(/*! sketch/ui */"sketch/ui"),m=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.document=e.document,this.documentData=e.document.documentData(),this.apiDocument=s.fromNative(this.documentData),this.setPanelState=e.setPanelState,this.onlySelected=e.onlySelected,this.lastUploaded=this.documentSettingForKey(this.apiDocument,"zeroheight-last-upload"),this.doneFirstUpload=a.getUserDefault("doneFirstUpload")}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"start",value:function(){var e=this;try{if(t.setUploadForDocument(this,this.document),this.setPanelState({inProgress:!0,progress:.01}),this.artboards=[],this.onlySelected){if(this.artboards=r.getSelectedLayers(this.apiDocument),!this.artboards)return void this.cancel()}else this.artboards=a.toArray(this.documentData.allArtboards());this.layerStyles=r.getLayerStyles(this.documentData),this.documentColors=r.getDocumentColors(this.documentData),r.getTextStyles(this.documentData).then(function(t){e.cancelled||(e.textStyles=t,e.gotAllItems())}).catch(this.uploadFailed.bind(this))}catch(e){this.uploadFailed(e)}}},{key:"gotAllItems",value:function(){if(this.allItems=this.layerStyles.concat(this.documentColors).concat(this.textStyles).concat(this.artboards),this.cancelled=!1,this.libraryNeedsCreating=!0,this.lastUploaded)this.onlyUploadChanges();else{if(0===this.allItems.length)return f.alert("zeroheight - nothing to upload 🙈","No symbols, artboards, layer styles, document colors or text styles to upload"),void this.cancel();this.fetchSketchDetails()}}},{key:"onlyUploadChanges",value:function(){var e=this;this.artboardHashes=[],this.detailsIndex=0,this.showDetailsProgress(),a.iterateItemsWithPeriodicYield({items:this.artboards,yieldEvery:500,yieldFor:50,onError:this.uploadFailed.bind(this),eachItem:this.loadArtboardHash.bind(this),onYield:function(){},onDone:this.loadedArtboardHashes.bind(this),isCancelled:function(){return e.cancelled}})}},{key:"loadArtboardHash",value:function(e){this.artboardHashes.push(r.getArtboardHashDetails(e,this.documentData))}},{key:"loadedArtboardHashes",value:function(){var e=this.artboardHashes.concat(this.documentColors).concat(this.layerStyles).concat(this.textStyles);u.post("library_hashes",{doc_id:String(this.documentData.objectID()),objects:e,only_selected:this.onlySelected}).then(function(e){return e.json()}).then(this.handleChanges.bind(this)).catch(this.uploadFailed.bind(this))}},{key:"handleChanges",value:function(e){var t=this;e.gone?this.fetchSketchDetails():(this.allItems=[],this.artboards.forEach(function(n){var i="MSArtboardGroup"===String(n.class())?String(n.objectID()):String(n.symbolID());e.changed_artboard_ids.includes(i)&&t.allItems.push(n)}),this.libraryNeedsCreating=!1,this.changes={added:e.added_count||0,updated:e.updated_count||0,deleted:e.deleted_count||0},0!==this.allItems.length?this.fetchSketchDetails():this.uploadComplete())}},{key:"showDetailsProgress",value:function(){var e=.1+this.detailsIndex/this.allItems.length*.4;this.setPanelState({inProgress:!0,progress:e})}},{key:"fetchSketchDetails",value:function(){var e=this;this.detailsIndex=0,this.itemsToUpload=[],a.iterateItemsWithPeriodicYield({items:this.allItems,yieldEvery:500,yieldFor:100,onError:this.uploadFailed.bind(this),eachItem:this.getItemDetails.bind(this),onYield:this.showDetailsProgress.bind(this),onDone:this.gotSketchDetails.bind(this),isCancelled:function(){return e.cancelled}})}},{key:"gotSketchDetails",value:function(){this.showDetailsProgress(),this.uploadedCount=0,this.setDocumentSettingForKey(this.apiDocument,"zeroheight-last-upload",(new Date).getTime()),this.showUploadProgress(),a.delay(50).then(this.createLibraryOnServer.bind(this)).catch(this.uploadFailed.bind(this))}},{key:"getItemDetails",value:function(e){"text_style"===e.kind||"layer_style"===e.kind||"document_color"===e.kind?this.itemsToUpload.push(e):this.itemsToUpload.push(r.getArtboardDetails(e,this.documentData)),this.detailsIndex++}},{key:"showUploadProgress",value:function(){var e=this.uploadedCount/this.itemsToUpload.length*.5+.5;this.setPanelState({inProgress:!0,progress:e})}},{key:"createLibraryOnServer",value:function(){this.cancelled||(this.libraryNeedsCreating?u.post("create_library",{doc_name:String(this.document.cloudName()),doc_id:String(this.documentData.objectID())}).then(this.sendItemsToServer.bind(this)).catch(this.uploadFailed.bind(this)):this.sendItemsToServer())}},{key:"sendRequest",value:function(e,t,n){var i=this,r=u.post("library_upload",{doc_id:String(this.documentData.objectID()),objects:e,request_index:n}),o=e.length;r.then(function(){i.cancelled||(i.uploadedCount+=o,i.showUploadProgress())}),t.push(r)}},{key:"sendNextRequests",value:function(){for(var t=this,n=[],i=this.requestsIndex;this.requestsIndex<this.requests.length&&this.requestsIndex<i+2;)this.sendRequest(this.requests[this.requestsIndex].items,n,this.requestsIndex),this.requestsIndex++;e.all(n).then(function(){if(!t.cancelled)return t.requestsIndex===t.requests.length?t.uploadComplete():void t.sendNextRequests()}).catch(this.uploadFailed.bind(this))}},{key:"sendItemsToServer",value:function(){var e=this,t=[],n=0;this.requests=[],this.itemsToUpload.forEach(function(i){t.push(i),(n+=i.image?i.image.length:JSON.stringify(i).length)>5e4&&(e.requests.push({items:t}),n=0,t=[])}),n>0&&this.requests.push({items:t}),this.requestsIndex=0,this.sendNextRequests()}},{key:"uploadComplete",value:function(){var e=this;if(this.doneFirstUpload){var n=function(n){d.showCompleted({docName:e.document.cloudName(),cta:n.cta,changes:e.changes,callback:e.openWeb.bind(e,n.url)}),t.setUploadForDocument(null,e.document),e.setPanelState({inProgress:!1})};if(void 0===this.changes)return n({cta:"View in zeroheight",url:"/uploads"});if(0===this.changes.length)return n();u.get("done_cta").then(function(e){return e.json()}).then(function(e){return n({cta:e.cta,url:e.url})}).catch(function(t){e.uploadFailed(t)})}else t.setUploadForDocument(null,this.document),this.setPanelState({inProgress:!1}),this.window=new h({alwaysOnTop:!0,handlers:{readyForContent:function(){e.window.setState({firstUpload:!0})},web:this.openWeb.bind(this,"/uploads")}}),this.window.open(),this.doneFirstUpload=!0,a.setUserDefault("doneFirstUpload",!0)}},{key:"openWeb",value:function(e){this.window&&(this.window.close(),this.window=null);var t=u.server()+(e||"/uploads");a.openUrlInBrowser(t)}},{key:"cancel",value:function(){this.cancelled=!0,this.lastUploaded&&this.setDocumentSettingForKey(this.apiDocument,"zeroheight-last-upload",this.lastUploaded),this.setPanelState({inProgress:!1}),t.setUploadForDocument(null,this.document)}},{key:"setDocumentSettingForKey",value:function(e,t,n){if(o.setDocumentSettingForKey)o.setDocumentSettingForKey(e,t,n);else{var i=e.sketchObject.documentData(),r=JSON.stringify(n);__command.setValue_forKey_onDocument(r,t,i)}}},{key:"documentSettingForKey",value:function(e,t){if(o.documentSettingForKey)return o.documentSettingForKey(e,t);var n=e.sketchObject.documentData(),i=__command.valueForKey_onDocument(t,n);return void 0!==i&&"undefined"!=i&&null!==i?JSON.parse(i):void 0}},{key:"uploadFailed",value:function(e){return c.onError(e),this.cancel(),401===e.status?l.showLogin(this.start.bind(this)):402===e.status?d.showNoSub():void d.showFailed(this.document.cloudName(),function(){var e=u.server()+"/settings/support";a.openUrlInBrowser(e)})}}],[{key:"cancelUploadForDocument",value:function(e){if(e){var n=NSThread.mainThread().threadDictionary()[t.uploadIdForDocument(e)];n&&n()}}},{key:"setUploadForDocument",value:function(e,n){if(n){var i=NSThread.mainThread().threadDictionary(),r=null;e&&(r=e.cancel.bind(e)),i[t.uploadIdForDocument(n)]=r}}},{key:"uploadIdForDocument",value:function(e){return"zhupload-"+e.cloudName()+"-"+e.documentData().objectID()}}]),t}()}.call(this,n(/*! ./node_modules/promise-polyfill/lib/index.js */"./node_modules/promise-polyfill/lib/index.js"))},"./src/user-events.js":
/*!****************************!*\
  !*** ./src/user-events.js ***!
  \****************************/
/*! exports provided: UserEvents */function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t),n.d(t,"UserEvents",function(){return u});var r=n(/*! ./upload */"./src/upload.js").Upload,o=n(/*! ./auth */"./src/auth.js").Auth,a=n(/*! ./metrics */"./src/metrics.js").Metrics,s=n(/*! ./window */"./src/window.js").Window,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,null,[{key:"upload",value:function(e){if(!o.isLoggedIn())return o.showLogin(this.doUpload.bind(this,e));this.doUpload(e)}},{key:"logout",value:function(){o.logout()}},{key:"doUpload",value:function(e){var t=e.onlySelected?"sketch:upload:selected":"sketch:upload:all";a.track(t),new r(e).start()}},{key:"cancel",value:function(e){r.cancelUploadForDocument(e.document),a.track("sketch:cancel")}},{key:"welcome",value:function(){var e=this;this.window=new s({alwaysOnTop:!0,height:400,width:400,handlers:{readyForContent:function(){e.window.setState({welcome:!0})},web:function(){this.window.close(),this.window=null}.bind(this)}}),this.window.open()}}]),e}()},"./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/*! exports provided: toArray, makeID, timeAgo, delay, iterateItemsWithPeriodicYield, openUrlInBrowser, getUserDefault, setUserDefault */function(e,t,n){"use strict";n.r(t),function(e,i){n.d(t,"toArray",function(){return a}),n.d(t,"makeID",function(){return s}),n.d(t,"timeAgo",function(){return u}),n.d(t,"delay",function(){return c}),n.d(t,"iterateItemsWithPeriodicYield",function(){return l}),n.d(t,"openUrlInBrowser",function(){return d}),n.d(t,"getUserDefault",function(){return h}),n.d(t,"setUserDefault",function(){return f});var r={prefix:"",suffix:" ago",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},o=function(e,t){return r[e]&&r[e].replace(/%d/i,Math.abs(Math.round(t)))};function a(e){if(Array.isArray(e))return e;for(var t=[],n=0;n<(e||[]).length;n+=1)t.push(e[n]);return t}function s(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function u(e){if(e){"string"==typeof e&&(e=(e=(e=(e=e.replace(/\.\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([+-]\d\d):?(\d\d)/," $1$2"),e=new Date(1e3*e||e));var t=.001*((new Date).getTime()-e)>>0,n=t/60,i=n/60,a=i/24,s=a/365;return r.prefix+(t<45&&o("seconds",t)||t<90&&o("minute",1)||n<45&&o("minutes",n)||n<90&&o("hour",1)||i<24&&o("hours",i)||i<42&&o("day",1)||a<30&&o("days",a)||a<45&&o("month",1)||a<365&&o("months",a/30)||s<1.5&&o("year",1)||o("years",s))+r.suffix}}function c(t){return new e(function(e){return i(e,t)})}function l(e){e.onYield(),c(e.yieldFor).then(function(){!function t(n){for(var i=0,r=Date.now();n<e.items.length&&i<e.yieldEvery&&!e.isCancelled();){var o=e.items[n];e.eachItem(o),i=Date.now()-r,n++}if(!e.isCancelled())return n>=e.items.length?e.onDone():void(i>=e.yieldEvery&&(e.onYield(),c(e.yieldFor).then(function(){t(n)}).catch(e.onError)))}(0)}).catch(e.onError)}function d(e){return NSWorkspace.sharedWorkspace().openURL(NSURL.URLWithString(e))}function h(e){var t=NSUserDefaults.alloc().initWithSuiteName("com.zeroheight.library").objectForKey(e);return t&&String(t)?String(t):null}function f(e,t){var n=NSUserDefaults.alloc().initWithSuiteName("com.zeroheight.library");n.setObject_forKey(t,e),n.synchronize()}}.call(this,n(/*! ./node_modules/promise-polyfill/lib/index.js */"./node_modules/promise-polyfill/lib/index.js"),n(/*! ./node_modules/@skpm/timers/timeout.js */"./node_modules/@skpm/timers/timeout.js").setTimeout)},"./src/window.js":
/*!***********************!*\
  !*** ./src/window.js ***!
  \***********************/
/*! exports provided: Window */function(e,t,n){"use strict";n.r(t),n.d(t,"Window",function(){return s});var i=n(/*! sketch-module-web-view */"./node_modules/sketch-module-web-view/lib/index.js"),r=n.n(i);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=n(/*! ./error-zh */"./src/error-zh.js").ErrorZh,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handlers=t.handlers,this.alwaysOnTop=t.alwaysOnTop||!1,this.width=t.width||300,this.height=t.height||250}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"open",value:function(){var e=r.a.fromId("zh.window");e&&e.close();var t={identifier:"zh.window",width:this.width,height:this.height,alwaysOnTop:this.alwaysOnTop};(this.browserWindow=new r.a(t),this.alwaysOnTop)&&this.browserWindow._panel.setHidesOnDeactivate(!1);for(var i in this.handlers)this.addHandler(i,this.handlers[i]);this.browserWindow.loadURL(n(/*! ../resources/window.html */"./resources/window.html"))}},{key:"close",value:function(){this.browserWindow.close()}},{key:"addHandler",value:function(e,t){this.browserWindow.webContents.removeAllListeners(e),this.browserWindow.webContents.on(e,function(){try{t(arguments)}catch(e){a.onError(e)}})}},{key:"setState",value:function(e){var t=JSON.stringify(e).replace(/'/g,"\\'");this.executeJavaScript("updateState(JSON.parse('".concat(t,"'));"))}},{key:"executeJavaScript",value:function(e){this.browserWindow.webContents.executeJavaScript(e)}}]),e}()},buffer:
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/*! no static exports found */function(e,t){e.exports=require("buffer")},"sketch/dom":
/*!*****************************!*\
  !*** external "sketch/dom" ***!
  \*****************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/dom")},"sketch/settings":
/*!**********************************!*\
  !*** external "sketch/settings" ***!
  \**********************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/settings")},"sketch/ui":
/*!****************************!*\
  !*** external "sketch/ui" ***!
  \****************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/ui")}});"default"===key&&"function"==typeof exports?exports(context):exports[key](context)}that.uploadSelected=__skpm_run.bind(this,"uploadSelected"),that.onRun=__skpm_run.bind(this,"default"),that.uploadAll=__skpm_run.bind(this,"uploadAll"),that.welcome=__skpm_run.bind(this,"welcome"),that.help=__skpm_run.bind(this,"help"),that.support=__skpm_run.bind(this,"support"),that.logout=__skpm_run.bind(this,"logout"),that.onStartup=__skpm_run.bind(this,"onStartup"),that.onShutdown=__skpm_run.bind(this,"onShutdown"),that.onOpenDocument=__skpm_run.bind(this,"onOpenDocument");